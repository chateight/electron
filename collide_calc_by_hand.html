<!-- detect the collision by caluculation -->
<!DOCTYPE HTML>
<HTML>
<HEAD>
	<TITLE>衝突判定（距離）</TITLE>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
	<LINK REL="stylesheet" TYPE="text/css" HREF="../../master.css">
	<SCRIPT TYPE="text/javascript">
		canvas  = null;
		ctx     = null;
		timerID = -1;
		x1 = 0.0, x2 = 0.0, y1 = 0.0, y2 = 0.0, t = 0.0, v = 20.0, hit = false;

		function start() {
			canvas = document.getElementById('canvas_e');
			canvas.width  = 600;   // キャンバス要素の幅
			canvas.height = 400;   // キャンバス要素の高さ
			ctx = canvas.getContext('2d');
			x1  = 40.0;
			x2  = canvas.width - 40;
			y1  = canvas.height / 2;
			y2  = canvas.height / 2 - 40;
			timerID = setInterval('draw()', 10);
		}
					// 描画
		function draw()
		{
			if (!hit) {
							// 移動
				t += 0.1;
				x1 = 40 + v * t;
				x2 = canvas.width - 40 - v * t;
							// 描画
				ctx.clearRect(0, 0, canvas.width, canvas.height);

				ctx.beginPath();
				ctx.fillStyle = "rgb(0, 255, 0)";
				ctx.arc(x1, y1, 40, 0, 2*Math.PI, false);
				ctx.fill();

				ctx.beginPath();
				ctx.fillStyle = "rgb(255, 0, 0)";
				ctx.arc(x2, y2, 40, 0, 2*Math.PI, false);
				ctx.fill();
							// 衝突判定
				let x = x1 - x2;
				let y = y1 - y2;
				if (Math.sqrt(x*x+y*y) <= 80)
					hit = true;
			}
		}
	</SCRIPT>
</HEAD>
<BODY CLASS="white" STYLE="text-align: center" onLoad="start()">
	<H1>衝突判定（距離）</H1>
	<CANVAS ID="canvas_e" STYLE="background-color: #eeffee;" WIDTH="600" HEIGHT="400"></CANVAS>
</BODY>
</HTML>